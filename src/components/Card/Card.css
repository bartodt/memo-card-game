.memory-card {
 width: var(--card-size);
 height: var(--card-size);
 perspective: 1000px;
 cursor: pointer;
 position: relative;
 transition: transform 0.2s;
 margin: auto;
}

/* Hover para cartas en estado normal */
.memory-card:not(.flipped):hover {
 transform: translateY(-5px) scale(1.05);
 box-shadow: 0 15px 30px var(--shadow-dark);
 transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275),
  box-shadow 0.3s ease;
}

/* Hover para cartas volteadas */
.memory-card.flipped:hover {
 transform: translateY(-5px);
 transition: transform 0.3s ease;
}

.memory-card.disabled {
 cursor: default;
 pointer-events: none;
}

.memory-card.disabled:hover {
 transform: none;
}

/* Estilo del efecto de barrido de luz - ELIMINAR */
.card-front::before,
.card-back::before {
 display: none;
}

/* Aplicar efecto de barrido en hover para cartas volteadas */

.card-inner {
 width: 100%;
 height: 100%;
 position: relative;
 border-radius: 12px;
 box-shadow: 0 10px 25px var(--shadow-dark);
 transition: transform 0.6s ease;
 transform-style: preserve-3d;
}

.card-front,
.card-back {
 width: 100%;
 height: 100%;
 position: absolute;
 top: 0;
 left: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 font-weight: bold;
 border-radius: 12px;
 -webkit-backface-visibility: hidden;
 backface-visibility: hidden;
}

.card-front {
 background: linear-gradient(135deg, var(--primary), var(--secondary));
 color: white;
 transform: rotateY(0deg);
}

.card-front::after {
 content: "?";
 font-size: 36px;
 opacity: 0.9;
 text-shadow: 2px 2px 5px var(--shadow-darker);
}

.card-back {
 background: linear-gradient(135deg, var(--light), var(--card-back));
 color: var(--dark);
 transform: rotateY(180deg);
 border: 3px solid var(--light);
}

.memory-card.flipped .card-inner {
 transform: rotateY(180deg);
}

.card-value {
 font-size: 28px;
 text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.memory-card.matched .card-inner {
 transform: rotateY(180deg);
 box-shadow: 0 0 25px var(--success);
 border: 3px solid var(--success);
 animation: matchedPulse 2s ease-in-out forwards;
}

/* Estilos específicos para cartas emparejadas */
.memory-card.matched .card-back {
 background: linear-gradient(
  135deg,
  var(--success),
  var(--success-light)
 ) !important;
 color: white !important;
}

/* Corregir la animación de pulso para mantener la rotación */
@keyframes matchedPulse {
 0% {
  transform: rotateY(180deg) scale(1);
  box-shadow: 0 0 25px var(--success);
 }
 25% {
  transform: rotateY(180deg) scale(1.1);
  box-shadow: 0 0 40px var(--success);
 }
 50% {
  transform: rotateY(180deg) scale(1.05);
  box-shadow: 0 0 35px var(--success);
 }
 100% {
  transform: rotateY(180deg) scale(1);
  box-shadow: 0 0 25px var(--success);
 }
}

/* Agregar un barrido periódico para cartas emparejadas - ELIMINAR */
.memory-card.matched .card-back::before {
 display: none;
}

/* Quitar la animación anterior de brillo */
@keyframes card-shine-back {
 0% {
  filter: brightness(1) contrast(1);
 }
 50% {
  filter: brightness(1.2) contrast(1.05);
 }
 100% {
  filter: brightness(1) contrast(1);
 }
}

.dark-theme .card-back {
 background: linear-gradient(135deg, #2c2c2c, #2c3e50);
 color: white;
 border: 2px solidwhite;
}

.dark-theme .memory-card.matched .card-back {
 background: linear-gradient(
  135deg,
  var(--success-dark-theme),
  var(--success-light-dark-theme)
 ) !important;
 color: white !important;
}

.card-inner::before {
 display: none;
}

@media (max-width: 600px) {
 :root {
  --card-size: 80px;
 }

 .card-front::after {
  font-size: 28px;
 }

 .card-value {
  font-size: 22px;
 }
}

/* Añadir borde brillante pulsante - excluir cartas emparejadas */
.memory-card:not(.matched):hover .card-inner::after {
 content: "";
 position: absolute;
 top: -2px;
 left: -2px;
 right: -2px;
 bottom: -2px;
 border: 2px solid rgba(255, 255, 255, 0.6);
 border-radius: 14px;
 animation: pulseBorder 1.5s infinite;
 pointer-events: none;
}

@keyframes pulseBorder {
 0% {
  opacity: 0.6;
  box-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
 }
 50% {
  opacity: 0.9;
  box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
 }
 100% {
  opacity: 0.6;
  box-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
 }
}

/* Agregar clase shake en JavaScript cuando la coincidencia es incorrecta */
.memory-card.shake:not(.matched) {
 animation: shakeCard 0.5s;
}

@keyframes shakeCard {
 0%,
 100% {
  transform: translateX(0);
 }
 20%,
 60% {
  transform: translateX(-5px);
 }
 40%,
 80% {
  transform: translateX(5px);
 }
}

/* Efecto de escala al hacer click */
.memory-card:active:not(.flipped):not(.matched) {
 transform: scale(0.95);
 transition: transform 0.1s;
}

/* Para este efecto necesitarías añadir elementos de partícula en JS,
   pero aquí está el CSS base */
.particle {
 position: absolute;
 background: white;
 border-radius: 50%;
 pointer-events: none;
 animation: particleFade 1s forwards;
}

@keyframes particleFade {
 0% {
  opacity: 1;
  transform: translate(0, 0) scale(0);
 }
 100% {
  opacity: 0;
  transform: translate(var(--tx), var(--ty)) scale(1);
 }
}

/* Rotación 3D suave al pasar el cursor */
.memory-card:not(.flipped):not(.matched):hover .card-inner {
 transform: rotateX(var(--rotate-x, 0deg)) rotateY(var(--rotate-y, 0deg));
 transition: transform 0.2s;
}

/* Sombra dinámica */
.memory-card:hover {
 --shadow-x: 10px;
 --shadow-y: 15px;
 --shadow-blur: 25px;
 box-shadow: var(--shadow-x) var(--shadow-y) var(--shadow-blur)
  var(--shadow-dark);
 transition: box-shadow 0.3s ease,
  transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Efecto de ondulación al voltear */
@keyframes ripple {
 0% {
  transform: scale(0.8) rotateY(180deg);
  opacity: 0.8;
 }
 25% {
  transform: scale(1.1) rotateY(180deg);
  opacity: 1;
 }
 100% {
  transform: scale(1) rotateY(180deg);
  opacity: 1;
 }
}

/* Definición simplificada de keyframes */
@keyframes flip {
 0% {
  transform: rotateY(0deg);
 }
 100% {
  transform: rotateY(180deg);
 }
}
