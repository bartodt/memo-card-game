.memory-card {
 width: var(--card-size);
 height: var(--card-size);
 perspective: 1000px;
 cursor: pointer;
 position: relative;
 transition: transform 0.2s;
 margin: auto;
}

.memory-card:hover {
 transform: translateY(-5px);
}

.memory-card.disabled {
 cursor: default;
 pointer-events: none;
}

.memory-card.disabled:hover {
 transform: none;
}

.card-inner {
 width: 100%;
 height: 100%;
 transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275),
  box-shadow 0.3s ease, border 0.3s ease;
 transform-style: preserve-3d;
 position: relative;
 border-radius: 12px;
 box-shadow: 0 10px 25px var(--shadow-dark);
}

.memory-card.flipped .card-inner {
 transform: rotateY(180deg);
}

.memory-card.matched .card-inner {
 transform: rotateY(180deg);
 box-shadow: 0 0 25px var(--success);
 border: 3px solid var(--success);
 animation: matchedAnimation 1s ease-in-out forwards;
}

@keyframes matchedAnimation {
 0% {
  transform: rotateY(180deg) scale(1);
  box-shadow: 0 0 25px var(--success);
 }
 25% {
  transform: rotateY(180deg) scale(1.15);
  box-shadow: 0 0 40px var(--success);
 }
 50% {
  transform: rotateY(180deg) scale(1.1) rotate(5deg);
 }
 75% {
  transform: rotateY(180deg) scale(1.1) rotate(-5deg);
 }
 100% {
  transform: rotateY(180deg) scale(1);
  box-shadow: 0 0 15px var(--success);
 }
}

.memory-card.matched .card-back {
 background: linear-gradient(
  135deg,
  var(--success),
  var(--success-light)
 ) !important;
 color: white !important;
 animation: colorPulse 3s infinite;
}

@keyframes colorPulse {
 0% {
  filter: brightness(1);
 }
 50% {
  filter: brightness(1.2);
 }
 100% {
  filter: brightness(1);
 }
}

.card-front,
.card-back {
 width: 100%;
 height: 100%;
 position: absolute;
 backface-visibility: hidden;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 28px;
 font-weight: bold;
 border-radius: 12px;
 user-select: none;
}

.card-front {
 background: linear-gradient(135deg, var(--primary), var(--secondary));
 color: white;
 box-shadow: inset 0 0 10px var(--shadow-dark);
}

.card-front::after {
 content: "?";
 font-size: 36px;
 opacity: 0.9;
 text-shadow: 2px 2px 5px var(--shadow-darker);
}

.card-back {
 background: linear-gradient(135deg, var(--light), var(--card-back));
 color: var(--dark);
 transform: rotateY(180deg);
 border: 3px solid var(--light);
 opacity: 1;
}

.memory-card.flipped .card-back {
 opacity: 1;
}

.card-value {
 display: block;
 opacity: 1;
 transform: rotateY(0deg);
 transition: none;
 will-change: auto;
 font-size: 28px;
 text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.dark-theme .card-back {
 background: linear-gradient(135deg, #2c2c2c, #2c3e50);
 color: white;
 border: 2px solidwhite;
}

.dark-theme .memory-card.matched .card-back {
 background: linear-gradient(
  135deg,
  var(--success-dark-theme),
  var(--success-light-dark-theme)
 ) !important;
 color: white !important;
}

@media (max-width: 600px) {
 :root {
  --card-size: 80px;
 }

 .card-front::after {
  font-size: 28px;
 }

 .card-value {
  font-size: 22px;
 }
}
